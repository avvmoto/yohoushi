<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Yohoushi - for allusers who love graphs!</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Yohoushi</h1>
        <h2>Yohoushi loves GrowthForecast</h2>
        <a href="https://github.com/yohoushi/yohoushi" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
        
<h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>About Yohoushi</h3>

<p>Yohoushi は <a href="http://kazeburo.github.io/GrowthForecast/">GrowthForecast</a> と連携し動作するグラフツールです。GrowthForecastをバックエンドとして利用し、Yohoushi は統合グラフビューワとして機能します。</p>

<p>Yohoushi では GrowthForecast では実現できなかった様々なビューでグラフを確認できます。例えば、グラフを大きくしたり、from/toの日時指定でグラフを確認したり、サムネイルサイズでたくさんあるグラフを一覧で見たりすることできます。またGrowthForecastではグラフ階層が3階層固定でしたがYohoushiではこの制約を無くすことも可能です。</p>

<p>また複数のGrowthForecastを集約してユーザに見せることが可能です。GrowthForecastサーバの台数を増やすことでシステムを容易にスケールできるようになります。また、たとえば各拠点に散らばっていたGrowthForecastサーバを1つのビューで見せることも可能です。</p>

<pre><code>         +----------+                 +---+
         |          |            +--> |GF1| <--- post a number 
Ops ---> | Yohoushi | <----------+    +---+
         |          |            |    +---+
         +----------+            +--> |GF2| <--- post a number
                                      +---+
</code></pre>

<p>また、既存のGrowthForecastのシステムに変更を加えることなくYohoushiをお試しできます。この場合は、たとえばcronなどで動作しているGrowthForecastへ値を登録するスクリプトを変更する必要はありません。</p>

<h3><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Install</a></h3>

<h4><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>(1) Requirements</h4>
<p>あらかじめ以下のソフトウェアをインストールしておいてください。</p>
<ol>
  <li>Ruby (>=2.0.0)</li>
  <li>MySQL or Sqlite3 (>=3.6.16)</li>
  <li><a href="http://kazeburo.github.io/GrowthForecast/">GrowthForecast</a> (>=0.62)</li>
</ol>

<h4><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>(2) Install Yohoushi</h4>

<p>右メニューのダウンロードページからアーカイブファイルをダウンロード、展開し、youhoushi ディレクトリで以下のコマンドを実行してください。
数分かかることがあります。 </p>

<pre><code>$ bin/bundle --deployment
</code></pre>

<h3><a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>(3) Configure Application</h3>

<p>GrowthForecast サーバのURLを config/application.yml に登録してください。
デフォルトでは localhost:5125 の GrowthForecast サーバに接続します。</p>

<pre><code># config/application.yml
multiforecast:
  mapping:
    '':     'http://localhost:5125'
</code></pre>

<p>複数の GrowthForecast サーバへ分散させる場合は以下のようにマッピングルールを記述します。</p>

<pre><code># config/application.yml
multiforecast:
  mapping:
    'app1/':     'http://localhost:5125'
    'app2/':     'http://localhost:5000'
</code></pre>

<p>この例では、名前が app1/ から始まるグラフは localhost:5125 に、app2/ から始まるグラフは localhost:5000 に分散されます。</p>

<h4><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>(4) Configure Database</h4>

<p>config/database.yml にMySQLの設定を記述し、次のコマンドを実行してください。</p>

<pre><code>$ bin/rake db:create db:migrate
</code></pre>

<p>デフォルトでは localhost:3306 の MySQL に root ユーザ、パスワードなしで接続し、yohoushi という名前のデータベースを作成します。</p>

<pre><code># config/database.yml
  adapter: mysql2
  database: yohoushi
  pool: 5
  timeout: 5000
  username: root
  password: 
  host: localhost
  port: 3306
</code></pre>

SQLite を使いたい場合は config/database-sqlite.yml を config/database.yml に上書きし、設定を記述した上で上記コマンドを実行してください。

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>(5) Run</h3>
<p>以下のコマンドで Yohoushi が起動します。Ctrl-c で停止します。</p>

<pre><code>$ bin/yohoushi</code></pre>

<p>ウェブブラウザで<code>http://localhost:4804</code>にアクセスしてみてください！Yohoushiの画面を確認できます。</p>

<p>デーモン化するには <code>-d</code> オプションを付けて起動してください。</p>

<pre><code>$ bin/yohoushi -d</code></pre>

<p>デーモン化したYohoushiを停止するには以下を実行してください。</p>

<pre><code>$ bin/yohoushi stop</code></pre>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>(6) Check</h3>
<p>Yohoushi の動作確認をするために GrowthForecast の URLに対してPOST リクエストを送り、グラフを作成してみましょう。この例では GrowthForecast が localhost:5125 で起動しているものとします。</p>

<pre><code>$ curl -d 'number=10' http://localhost:5125/api/app1/section1/graph1
</code></pre>

<p>GrowthForecast との同期が走って(最大１分待ちます) Yohoushi にグラフが表示されれば成功です。</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>For more information</h3>

<p>Yohoushiに4階層以上のグラフを登録するには <a href="https://github.com/sonots/multiforecast-client">multiforecast-client</a> gemを使ってデータをPOSTしてください。</p>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/yohoushi/yohoushi/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/yohoushi/yohoushi/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/yohoushi/yohoushi"></a> is maintained by <a href="https://github.com/yohoushi">yohoushi</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
